var facebookAppId;!function(e,o,a){var n=e.getElementsByTagName(o)[0];e.getElementById(a)||((o=e.createElement(o)).id=a,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk"),(facebookAppId="undefined"!=typeof mkdfSocialLoginVars?mkdfSocialLoginVars.social.facebookAppId:facebookAppId)&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(t){"use strict";var e={};function o(){var e=t(".mkdf-modal-opener"),a=t(".mkdf-modal-holder");e.length&&a.length&&(e.on("click",function(e){e.preventDefault();var o=t(this).data("modal");a.fadeOut(300),a.removeClass("opened"),a.each(function(){var e=t(this);"undefined"!==e.data("modal")&&e.data("modal")===o&&(e.fadeIn(300),e.addClass("opened"))})}),a.each(function(){var o=t(this);o.on("click",function(e){o.hasClass("opened")&&(o.fadeOut(300),o.removeClass("opened"))}),t(window).on("keyup",function(e){o.hasClass("opened")&&27===e.keyCode&&(o.fadeOut(300),o.removeClass("opened"))}),o.find(".mkdf-modal-content").on("click",function(e){e.stopPropagation()})}))}function a(){t(".mkdf-login-form").on("submit",function(e){e.preventDefault();e={action:"everlead_membership_login_user",security:t(this).find("#mkdf-login-security").val(),login_data:t(this).serialize()};return t.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}}),!1})}function n(){t(".mkdf-register-form").on("submit",function(e){e.preventDefault();e={action:"everlead_membership_register_user",security:t(this).find("#mkdf-register-security").val(),register_data:t(this).serialize()};return t.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}}),!1})}function s(){var o=t(".mkdf-reset-pass-form");o.on("submit",function(e){e.preventDefault();e={action:"everlead_membership_user_lost_password",user_login:o.find("#user_reset_password_login").val()};t.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}})})}function i(e){var o=t(".mkdf-membership-response-holder"),a=_.template(t(".mkdf-membership-response-template").html()),n="success"===e.status?"mkdf-membership-message-succes":"mkdf-membership-message-error",e=a({messageClass:n,message:e.message});o.html(e)}function d(){t(".mkdf-facebook-login-holder").on("submit",function(e){e.preventDefault(),window.FB.login(function(e){"connected"===(e=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var o=t(".mkdf-facebook-login-holder [name^=mkdf_nonce_facebook_login]").val();e.nonce=o,e.image=e.picture.data.url,t.ajax({type:"POST",data:{action:"everlead_membership_check_facebook_user",response:e},url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}})})):"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function r(){var e;(e="undefined"!=typeof mkdfSocialLoginVars?mkdfSocialLoginVars.social.googleClientId:e)?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),t(".mkdf-google-login-holder").on("submit",function(e){e.preventDefault(),window.auth2.signIn(),function(){{var e,o;window.auth2.isSignedIn.get()&&(e=window.auth2.currentUser.get().getBasicProfile(),o=t(".mkdf-google-login-holder [name^=mkdf_nonce_google_login]").val(),o={action:"everlead_membership_check_google_user",response:{id:e.getId(),name:e.getName(),email:e.getEmail(),image:e.getImageUrl(),link:"https://plus.google.com/"+e.getId(),nonce:o}},t.ajax({type:"POST",data:o,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}}))}}()})}):t(".mkdf-google-login-holder").on("submit",function(e){e.preventDefault()})}"undefined"!=typeof mkdf&&(mkdf.modules.socialLogin=e),e.mkdfUserLogin=a,e.mkdfUserRegister=n,e.mkdfUserLostPassword=s,e.mkdfInitWidgetModal=o,e.mkdfInitFacebookLogin=d,e.mkdfInitGooglePlusLogin=r,e.mkdfRenderAjaxResponseMessage=i,t(document).ready(function(){o(),a(),n(),s()}),t(window).on("load",function(){d(),r(),function(){t(".mkdf-membership-main-wrapper");var e=t(".page-template-user-dashboard .mkdf-content"),o=t(".mkdf-page-footer"),a=0;!mkdf.body.hasClass("mkdf-header-transparent")&&1024<mkdf.windowWidth&&(a=a+mkdfGlobalVars.vars.mkdfMenuAreaHeight+mkdfGlobalVars.vars.mkdfLogoAreaHeight);0<o.length&&(a+=o.outerHeight());1024<mkdf.windowWidth&&(a=mkdf.windowHeight-a,e.css({"min-height":a+"px"}))}()})}(jQuery),function(a){"use strict";var e={};function o(){n(),a(document.body).on("everlead_membership_favorites_trigger",function(){n()})}function n(){a(".mkdf-membership-item-favorites").on("click",function(e){e.preventDefault();var o,e=a(this);void 0!==e.data("item-id")&&(o=e.data("item-id")),function(o,e){e={action:"everlead_membership_add_item_to_favorites",item_id:e};a.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);"success"===e.status&&(o.hasClass("mkdf-icon-only")||o.find("span").text(e.data.message),o.find(".mkdf-favorites-icon").removeClass("mkdf-favorite-inactive mkdf-favorite-active").addClass(e.data.icon))}})}(e,o)})}(mkdf.modules.membershipFavorites=e).mkdfOnDocumentReady=o,a(document).ready(o)}(jQuery);